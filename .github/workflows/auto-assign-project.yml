name: Auto-assign to Project

# This workflow automatically adds new issues and PRs to the project board.
#
# IMPORTANT: User-level GitHub Projects require a Personal Access Token (PAT).
# The default GITHUB_TOKEN doesn't have permissions for user-level projects.
#
# To fix:
# 1. Create a PAT with 'project' and 'repo' scopes at https://github.com/settings/tokens
# 2. Add it as a repository secret named PROJECT_TOKEN
# 3. Update github-token below to: ${{ secrets.PROJECT_TOKEN }}
#
# Alternative: Manually add items using:
#   gh auth refresh -s project
#   gh project item-add 4 --owner ricCap --url <issue-url>

on:
  issues:
    types: [opened]
  pull_request:
    types: [opened]

permissions:
  issues: write
  pull-requests: write

jobs:
  add-to-project:
    name: Add issue/PR to project board
    runs-on: ubuntu-latest
    steps:
      - name: Add to project
        uses: actions/add-to-project@v0.5.0
        with:
          project-url: https://github.com/users/ricCap/projects/4
          # Using GITHUB_TOKEN - works for org projects but fails for user projects
          # For user projects, create a PAT and use: ${{ secrets.PROJECT_TOKEN }}
          github-token: ${{ secrets.GITHUB_TOKEN }}
