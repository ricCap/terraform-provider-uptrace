##
## Uptrace configuration for local development
## Based on: https://github.com/uptrace/uptrace/tree/master/example/docker
##

service:
  env: development
  secret: please-change-this-secret-key-to-something-random

site:
  url: http://localhost:14318
  ingest_url: http://localhost:14318?grpc=14317

listen:
  http:
    addr: :80
  grpc:
    addr: :4317

seed_data:
  update: true
  delete: true

  users:
    - key: user1
      name: Uptrace Admin
      email: admin@uptrace.local
      password: SomeRandomPassword
      email_confirmed: true

  user_tokens:
    - key: user_token1
      user_key: user1
      token: user1_secret_token

  orgs:
    - key: org1
      name: Test Org

  org_users:
    - key: org_user1
      org_key: org1
      user_key: user1
      role: owner

  projects:
    - key: project1
      name: Test Project
      org_key: org1

  project_tokens:
    - key: project_token1
      project_key: project1
      token: project1_secret_token

  project_users:
    - key: project_user1
      project_key: project1
      org_user_key: org_user1
      perm_level: admin

ch_cluster:
  cluster: uptrace1
  replicated: false
  distributed: false
  shards:
    - replicas:
        - addr: clickhouse:9000
          database: uptrace
          user: uptrace
          password: uptrace
          max_execution_time: 15s

pg:
  addr: postgres:5432
  user: uptrace
  password: uptrace
  database: uptrace

ch_schema:
  compression: ZSTD(1)
  spans_index: { storage_policy: default }
  spans_data: { storage_policy: default }
  logs_index: { storage_policy: default }
  logs_data: { storage_policy: default }
  metrics: { storage_policy: default }

redis_cache:
  addrs:
    1: redis:6379
  db: 0

mailer:
  smtp:
    enabled: false

self_monitoring:
  dsn: http://project1_secret_token@uptrace:80?grpc=4317

logging:
  level: INFO
