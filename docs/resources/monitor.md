---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "uptrace_monitor Resource - uptrace"
subcategory: ""
description: |-
  Manages an Uptrace monitor for metrics or errors.
---

# uptrace_monitor (Resource)

Manages an Uptrace monitor for metrics or errors.

## Example Usage

```terraform
# Metric monitor example
resource "uptrace_monitor" "high_cpu" {
  name = "High CPU Usage"
  type = "metric"

  notify_everyone_by_email = false
  channel_ids              = [1, 2]

  params = {
    metrics = [
      {
        name  = "system.cpu.utilization"
        alias = "cpu_usage"
      }
    ]
    query              = "avg(cpu_usage) > 90"
    column             = "cpu_usage"
    max_allowed_value  = 90
    grouping_interval  = 60000
    check_num_point    = 3
    nulls_mode         = "allow"
  }
}

# Error monitor example
resource "uptrace_monitor" "api_errors" {
  name = "API Error Rate"
  type = "error"

  notify_everyone_by_email = true
  team_ids                 = [1]

  params = {
    metrics = [
      {
        name = "uptrace_tracing_logs"
      }
    ]
    query = "severity:ERROR AND service:api"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Monitor name.
- `params` (Attributes) Monitor parameters (metric or error specific). (see [below for nested schema](#nestedatt--params))
- `type` (String) Monitor type. Must be 'metric' or 'error'.

### Optional

- `channel_ids` (List of Number) List of notification channel IDs.
- `notify_everyone_by_email` (Boolean) Whether to notify all project members by email.
- `repeat_interval` (Attributes) Repeat interval configuration. (see [below for nested schema](#nestedatt--repeat_interval))
- `team_ids` (List of Number) List of team IDs to notify.
- `trend_agg_func` (String) Trend aggregation function for monitor evaluation. Required for Uptrace cloud API, optional for self-hosted v2.0.2 and earlier. Valid values: avg, sum, min, max, p50, p90, p95, p99.

### Read-Only

- `created_at` (String) Monitor creation timestamp.
- `id` (String) Monitor identifier.
- `state` (String) Current monitor state (open, firing, paused).
- `updated_at` (String) Monitor last update timestamp.

<a id="nestedatt--params"></a>
### Nested Schema for `params`

Optional:

- `check_num_point` (Number) Number of consecutive points that must breach threshold.
- `column` (String) Column name to evaluate (metric monitors only).
- `grouping_interval` (Number) Grouping interval in milliseconds.
- `max_allowed_value` (Number) Maximum allowed value for the metric.
- `metrics` (Attributes List) List of metrics to monitor. (see [below for nested schema](#nestedatt--params--metrics))
- `min_allowed_value` (Number) Minimum allowed value for the metric.
- `nulls_mode` (String) How to handle null values: 'allow', 'forbid', or 'convert'.
- `query` (String) UQL query for metric evaluation or error filtering. Note: The Uptrace cloud API normalizes queries to canonical form, so the stored value may differ from the input.
- `time_offset` (Number) Time offset in milliseconds.

<a id="nestedatt--params--metrics"></a>
### Nested Schema for `params.metrics`

Required:

- `name` (String) Metric name.

Optional:

- `alias` (String) Optional alias for the metric.



<a id="nestedatt--repeat_interval"></a>
### Nested Schema for `repeat_interval`

Optional:

- `interval` (Number) Custom interval in seconds (only for custom strategy, minimum 60).
- `strategy` (String) Repeat interval strategy. Must be 'default' or 'custom'.

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
#!/bin/sh
# Import an existing Uptrace monitor by ID
terraform import uptrace_monitor.high_cpu <monitor_id>
```
